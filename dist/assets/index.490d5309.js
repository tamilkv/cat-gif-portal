import{b as x,K as R,P as W,c as h,r as d,R as t,a as y,C as E,d as _,L as S,T as B,S as F,w as j,e as D}from"./vendor.4c117eaa.js";const $=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))p(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&p(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function p(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}};$();var V="/assets/twitter-logo.63ba7c86.svg";const U="0.0.0",z="myepicproject",H=[{name:"startStuffOff",accounts:[{name:"baseAccount",isMut:!0,isSigner:!0},{name:"user",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addGif",accounts:[{name:"baseAccount",isMut:!0,isSigner:!1},{name:"user",isMut:!0,isSigner:!0}],args:[{name:"gifLink",type:"string"}]},{name:"updateItem",accounts:[{name:"baseAccount",isMut:!0,isSigner:!1},{name:"user",isMut:!0,isSigner:!0}],args:[{name:"index",type:"string"}]},{name:"sendSol",accounts:[{name:"from",isMut:!0,isSigner:!0},{name:"to",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]}],q=[{name:"BaseAccount",type:{kind:"struct",fields:[{name:"totalGifs",type:"u64"},{name:"gifsList",type:{vec:{defined:"ItemStruct"}}}]}}],J=[{name:"ItemStruct",type:{kind:"struct",fields:[{name:"gifLink",type:"string"},{name:"userAddress",type:"publicKey"},{name:"upvotes",type:"u64"}]}}],X={address:"71WZw3fAcjv77vKgwLJXnPdrHyY14EV8d5P26KMKiikD"};var g={version:U,name:z,instructions:H,accounts:q,types:J,metadata:X};const Y={publicKey:{"0":175,"1":70,"2":63,"3":121,"4":35,"5":115,"6":242,"7":227,"8":239,"9":19,"10":3,"11":240,"12":141,"13":99,"14":106,"15":22,"16":76,"17":6,"18":75,"19":198,"20":54,"21":213,"22":32,"23":68,"24":252,"25":178,"26":204,"27":234,"28":111,"29":166,"30":103,"31":20},secretKey:{"0":139,"1":143,"2":111,"3":149,"4":133,"5":89,"6":242,"7":110,"8":188,"9":160,"10":68,"11":49,"12":70,"13":245,"14":227,"15":228,"16":72,"17":253,"18":110,"19":27,"20":125,"21":214,"22":112,"23":67,"24":4,"25":65,"26":146,"27":214,"28":177,"29":223,"30":25,"31":41,"32":175,"33":70,"34":63,"35":121,"36":35,"37":115,"38":242,"39":227,"40":239,"41":19,"42":3,"43":240,"44":141,"45":99,"46":106,"47":22,"48":76,"49":6,"50":75,"51":198,"52":54,"53":213,"54":32,"55":68,"56":252,"57":178,"58":204,"59":234,"60":111,"61":166,"62":103,"63":20}};var Z={_keypair:Y};globalThis.Buffer=x.Buffer;const K="_buildspace",Q=`https://twitter.com/${K}`,{SystemProgram:ee,Keypair:ae}=j,te=Object.values(Z._keypair.secretKey),ne=new Uint8Array(te),c=R.fromSecretKey(ne),b=new W(g.metadata.address),oe=h("devnet"),k={preflightCommitment:"processed"},re=()=>{const[i,l]=d.exports.useState(null),[a,p]=d.exports.useState(""),[o,r]=d.exports.useState([]),u=async()=>{try{const{solana:e}=window;if(e){if(e.isPhantom){console.log("Phantom wallet found!");const n=await e.connect({onlyIfTrusted:!0});console.log("Connected with Public Key:",n.publicKey.toString()),l(n.publicKey.toString())}}else console.log("Solana object not found, install phantom wallet extension")}catch(e){console.log(e)}},A=async()=>{console.log("Wallet connect clicked");const{solana:e}=window;if(e){const n=await e.connect();console.log("Wallet connected with public key: ",n.publicKey.toString()),l(n.publicKey.toString())}},L=async()=>{if(a.length===0){console.log("No gif link given!");return}console.log("Gif link:",a);try{const e=f();await new y(g,b,e).rpc.addGif(a,{accounts:{baseAccount:c.publicKey,user:e.wallet.publicKey}}),console.log("GIF successfully sent to program",a),await w()}catch(e){console.log("Error sending GIF:",e)}},P=e=>{const{value:n}=e.target;p(n)},f=()=>{const e=new E(oe,k.preflightCommitment);return new _(e,window.solana,k.preflightCommitment)},N=async()=>{try{const e=f(),n=new y(g,b,e);console.log("ping"),await n.rpc.startStuffOff({accounts:{baseAccount:c.publicKey,user:e.wallet.publicKey,systemProgram:ee.programId},signers:[c]}),console.log("Created a new BaseAccount w/ address:",c.publicKey.toString()),await w()}catch(e){console.log("Error creating BaseAccount account:",e)}},I=async e=>{try{const n=f(),s=new y(g,b,n);console.log("ping"),console.log("index: ",e),await s.rpc.updateItem(e.toString(),{accounts:{baseAccount:c.publicKey,user:n.wallet.publicKey}})}catch{console.log("Error in upvote of Gif")}},C=async e=>{try{const m=window.solana;var n=new E(h("devnet"));console.log("to send sol to , amount",e,S/100);var s=new B().add(F.transfer({fromPubkey:m.publicKey,toPubkey:e,lamports:S}));s.feePayer=await m.publicKey;let M=await n.getRecentBlockhash();s.recentBlockhash=await M.blockhash,s&&console.log("Txn created successfully");let O=await m.signTransaction(s),v=await n.sendRawTransaction(O.serialize());await n.confirmTransaction(v),console.log("Signature: ",v)}catch(m){console.error("error in sending sol",m)}},T=()=>t.createElement("button",{className:"cta-button connect-wallet-button",onClick:A},"Connect to Wallet"),G=()=>o===null?t.createElement("div",{className:"connected-container"},t.createElement("button",{className:"cta-button submit-gif-button",onClick:N},"Do One-Time Initialization For GIF Program Account")):t.createElement("div",{className:"connected-container"},t.createElement("form",{onSubmit:e=>{e.preventDefault(),L()}},t.createElement("input",{type:"text",placeholder:"Enter gif link!",value:a,onChange:P}),t.createElement("button",{type:"submit",className:"cta-button submit-gif-button"},"Submit")),t.createElement("div",{className:"gif-grid"},o.map((e,n)=>t.createElement("div",{className:"gif-item",key:n},t.createElement("img",{src:e.gifLink}),t.createElement("button",{type:"button",onClick:()=>I(n)}," ",t.createElement("b",null,"Upvote ",e.upvotes.toString()," ")," "),t.createElement("button",{type:"button",onClick:()=>C(e.userAddress.toString())}," ",t.createElement("b",null," SendSolTip ")),t.createElement("div",null,e.userAddress.toString())))));d.exports.useEffect(()=>{const e=async()=>{await u()};return window.addEventListener("load",e),()=>window.removeEventListener("load",e)},[]);const w=async()=>{try{const e=f(),s=await new y(g,b,e).account.baseAccount.fetch(c.publicKey);console.log("Got the account!",s),r(s.gifsList)}catch(e){console.error("Error fetching account",e,c.publicKey),r(null)}};return d.exports.useEffect(()=>{i&&(console.log("Fetching gif list..."),w())},[i]),t.createElement("div",{className:"App"},t.createElement("div",{className:"container"},t.createElement("div",{className:i?"authed-container":"container"},t.createElement("div",{className:"header-container"},t.createElement("p",{className:"header"},"Cats GIF Portal"),t.createElement("p",{className:"sub-text"},"View your GIF collection in the metaverse \u2728"),!i&&T(),i&&G()),t.createElement("div",{className:"footer-container"},t.createElement("img",{alt:"Twitter Logo",className:"twitter-logo",src:V}),t.createElement("a",{className:"footer-text",href:Q,target:"_blank",rel:"noreferrer"},`built on @${K}`)))))};D.render(t.createElement(t.StrictMode,null,t.createElement(re,null)),document.getElementById("root"));
